<settings   ><general animateui="true" saveallbeforerun="false"/><auto><panels active="ext/tree/tree"><panel path="ext/settings/settings" width="250"/><panel path="ext/openfiles/openfiles" width="150"/><panel path="ext/tree/tree" width="200"/><panel path="ext/testpanel/testpanel" width="290"/><panel path="ext/runpanel/runpanel" width="270"/></panels><testpanel autorun="none"/><customtypes/><console autoshow="true" active="console" expanded="true" height="186"/><configurations debug="true" autohide="true"   ><config name="db.js (active file)" curfile="1" last="true" path="/ch07/lib/db.js"/></configurations><help show="true"/><zen>0.7</zen><statusbar>false</statusbar><projecttree scrollpos="0">["/workspace","/workspace/ch06/public","/workspace/ch04/public","/workspace/ch04/views","/workspace/ch05/public","/workspace/ch07","/workspace/ch05/public/js","/workspace/ch05/views","/workspace/ch06/public/js","/workspace/ch06/views","/workspace/ch07/views","/workspace/ch07/public"]</projecttree><panel>{"ext/tree/tree":{"parent":{"visible":true},"visible":true,"flex":1,"state":"normal"}}</panel><tree_selection path="/workspace/ch07/lib/db.js" type="file"/><recentfiles>[{"caption":"db.js","value":"/workspace/ch07/lib/db.js"},{"caption":"chart.ejs","value":"/workspace/ch07/views/chart.ejs"},{"caption":"index.ejs","value":"/workspace/ch07/views/index.ejs"},{"caption":"portfolio.ejs","value":"/workspace/ch07/views/portfolio.ejs"},{"caption":"chart.ejs","value":"/workspace/ch06/views/chart.ejs"},{"caption":"portfolio.ejs","value":"/workspace/ch06/views/portfolio.ejs"},{"caption":"portfolio.ejs","value":"/workspace/ch05/views/portfolio.ejs"},{"caption":"portfolio.ejs","value":"/workspace/ch04/views/portfolio.ejs"},{"caption":"nockmarket.js","value":"/workspace/ch04/nockmarket.js"},{"caption":"nockmarket.js","value":"/workspace/ch02/nockmarket.js"}]</recentfiles><node-version version="auto"/><extensions/><files active="/workspace/ch07/lib/db.js"><file path="/workspace/ch07/views/chart.ejs" type="file" size="1875" name="chart.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch07/views/chart.ejs"/><file path="/workspace/ch07/views/index.ejs" type="file" size="4777" name="index.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch07/views/index.ejs"/><file path="/workspace/ch07/views/portfolio.ejs" type="file" size="4678" name="portfolio.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch07/views/portfolio.ejs"/><file path="/workspace/ch06/views/chart.ejs" type="file" size="1875" name="chart.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch06/views/chart.ejs"/><file path="/workspace/ch06/views/portfolio.ejs" type="file" size="4678" name="portfolio.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch06/views/portfolio.ejs"/><file path="/workspace/ch05/views/portfolio.ejs" type="file" size="4041" name="portfolio.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch05/views/portfolio.ejs"/><file path="/workspace/ch04/views/portfolio.ejs" type="file" size="2946" name="portfolio.ejs" contenttype="application/octet-stream" modifieddate="Fri, 12 Oct 2012 15:58:57 +1100" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch04/views/portfolio.ejs" state="{&quot;scrolltop&quot;:0,&quot;scrollleft&quot;:0,&quot;selection&quot;:{&quot;start&quot;:{&quot;row&quot;:0,&quot;column&quot;:0},&quot;end&quot;:{&quot;row&quot;:0,&quot;column&quot;:0}},&quot;folds&quot;:[]}"/><file path="/workspace/ch07/lib/db.js" type="file" size="2076" name="db.js" contenttype="application/javascript; charset=utf-8" modifieddate="Fri, 21 Sep 2012 16:16:39 +1000" creationdate="" lockable="false" hidden="false" executable="false" scriptname="/home/owner/WebstormProjects/nockmarket/ch07/lib/db.js" changed="0" state="{&quot;scrolltop&quot;:0,&quot;scrollleft&quot;:0,&quot;selection&quot;:{&quot;start&quot;:{&quot;row&quot;:0,&quot;column&quot;:0},&quot;end&quot;:{&quot;row&quot;:0,&quot;column&quot;:0}},&quot;folds&quot;:[]}"/></files></auto><editors><code overwrite="false" selectstyle="line" activeline="true" showinvisibles="false" showprintmargin="true" printmargincolumn="80" softtabs="true" tabsize="4" scrollspeed="2" fontsize="12" wrapmode="false" wraplimitmin="" wraplimitmax="" gutter="true" folding="true" newlinemode="auto" highlightselectedword="true" autohidehorscrollbar="true" animatedscroll="true"/></editors><beautify><jsbeautify preserveempty="true" keeparrayindentation="false" jslinthappy="false" braces="end-expand"/></beautify><breakpoints   /><search><word key="transf"/><word key=".trades"/><word key=""/><word key="updateEmail"/><word key="updateemail"/><word key="&quot;ema"/><word key="sendTrad"/><word key="trades"/><word key="index"/><word key="gener"/><word key="io.se"/><word key="tab3"/><word key="tab2"/><word key="keyw"/><word key="after"/><word key="tab3"/><word key="mymodal"/><word key="chatmodal"/><word key="mymodal"/><word key="tab3"/><word key="chat"/><word key="admin"/><word key="face"/><word key="fce"/><word key="check"/><word key="db.pu"/><word key="push"/><word key="object"/><word key="place"/><word key="sendex"/><word key="transfor"/><word key="activa"/><word key="new lead"/><word key="your loc"/><word key="save chan"/><word key="doflash"/><word key="profile"/><word key="save ch"/><word key="trade"/><word key="follow"/><word key="similar"/><word key="neigh"/><word key="$ne"/><word key="recent"/><word key="toggle"/><word key="owner"/><word key="homeowner"/><word key="dista"/><word key="miles"/><word key="console.log"/><word key="companies"/><word key="about"/><word key="getUser"/><word key="24708814"/><word key="homeowners"/><word key="plainpasswo"/><word key="display"/><word key="displayn"/><word key="realna"/><word key="realname"/><word key="city"/><word key="register"/><word key="authentic"/><word key="authenticating"/><word key="authentic"/><word key="active"/><word key="picture"/><word key="facebooklib"/><word key="url"/><word key="photo"/><word key="pictu"/><word key="putstate"/><word key="services"/><word key="isfollo"/><word key="owner"/><word key="profi"/><word key="usern"/><word key="count"/><word key="addFriend: function(id, friendId, callback) {        db.push('user', db.toId(id), {friends: db.toId(friendId)}, callback);     }, // `id` user id    addHouse: function(id, house, callback) {        db.push('user', db.toId(id), {houses: house}, callback);             }, // `id` user id    addPhoto: function(id, originalFilename, callback) {//Get the user        db.insertOne('photo', {originalFilename: originalFilename}, function(err, photo) {            db.push('user', db.toId(id), {pics: photo._id}, function(err) {                if (err) throw err;                callback(err, photo);            });        });    },     // `id` user id    addReceived: function(id, received, callback) {        db.push('user', db.toId(id), {received: received}, callback);         }, // `id` user id    addSent: function(id, sent, callback) {        db.push('user', db.toId(id), {sent: sent}, callback);              },        // Add user to database    // `user` user object    addUser: function(user, callback) {        user.password = houselib.encrypt(user.password);        db.insertOne('user', user, callback);    },    // Add a wish to the default house for a given user // `id` user id    addWish: function(id, wishId, callback) {                db.push('user', db.toId(id), {wishes: db.toId(wishId)}, callback);    },    countRecommended: function(id, callback) {        db.find('user', {contractors: db.toId(id)}, callback);    },    // delete rcommended    delContractor: function(uid, cid, callback) {        module.exports.get(uid, function(err, user) {   if (err)  {                console.log(err);                return;   }   if (user.contractors) {    var stringIds = user.contractors.map(function(id) {return id.toString()});    var index = stringIds.indexOf(cid.toString());    if (-1 != index)     user.contractors.splice(index, 1);     db.save('user', user, callback);   }   else {    console.log('no recommended contractors found');    callback(null, 0);   }  });               },    delFollowing: function(uid, wid, callback) {             module.exports.get(uid, function(err, user) {   if (err)  {                console.log(err);                return;   }   if (user.following) {    var stringIds = user.following.map(function(id) {return id.toString()});    var index = stringIds.indexOf(wid.toString());    if (-1 != index)     user.following.splice(index, 1);     db.save('user', user, callback);   }   else {    console.log('no following wishes found');    callback(null, 0);   }  });            },            delLink: function(uid, description, callback) {        description = decodeURIComponent(description);     module.exports.get(uid, function(err, user) {   if (err) throw err;   if (user.links) {        var stringDesc = user.links.map(function(link) {return link.description});    var index = stringDesc.indexOf(description);    if (-1 != index)     user.links.splice(index, 1);    //console.log('db', db.toId(sid), user.services, index )     db.save('user', user, callback);   }   else {    console.log('no link found');    callback(null, 0);   }  }); },     delService: function(uid, sid, callback) {  module.exports.get(uid, function(err, user) {   if (err) throw err;   if (user.services) {        var stringIds = user.services.map(function(id) {return id.toString()});    var index = stringIds.indexOf(sid.toString());    if (-1 != index)     user.services.splice(index, 1);     db.save('user', user, callback);   }   else {    console.log('no services found');    callback(null, 0);   }  }); },     delWish: function(uid, wid, callback) {             module.exports.get(uid, function(err, user) {   if (err)  {                console.log(err);                return;   }   if (user.wishes) {    var stringIds = user.wishes.map(function(id) {return id.toString()});    var index = stringIds.indexOf(wid.toString());    if (-1 != index)     user.wishes.splice(index, 1);     db.save('user', user, callback);   }   else {    console.log('no wishes found');    callback(null, 0);   }  });            },    getActivation: function(code, callback) {        db.findOne('activation', {code: code}, callback);    },    "/><word key="db.find"/><word key="contractors"/><word key="recomm"/><word key="$in"/><word key="_id"/><word key="db.fi"/><word key="recomme"/><word key="ownerpic"/><word key="postWi"/><word key="start"/><word key="bumm"/><word key="wish l"/><word key="follo"/><word key="other h"/><word key="wish.us"/><word key="chat"/><word key="chatt"/><word key="butto"/><word key="leads"/><word key="logout"/><word key="faceb"/><word key="OK"/><word key="it's"/><word key="it's o"/><word key="contac"/><word key="recomme"/><word key="iframe"/><word key="slug"/><word key="long"/><word key="service area"/><word key="doactiv"/><word key="doActiv"/><word key="faceb"/><word key="doact"/><word key="getdisplay"/><word key="services"/><word key="slug"/><word key="populateCon"/><word key="services"/><word key="red beaco"/><word key="content"/><word key="iframe"/><word key="red bea"/><word key="about"/><word key="href"/><word key="profile"/><word key="corelib."/><word key="fromwi"/><word key="my account"/><word key="addNotification"/><word key="buildNotification"/><word key="added to"/><word key="wish"/><word key="console.log"/><word key="console.logo"/><word key="save"/><word key="popula"/><word key="assetlib"/><word key="getuids"/><word key="owners"/><word key="del"/><word key="getfromw"/><word key="https"/><word key="ssl_"/><word key="ssl"/><word key="archi"/><word key="electri"/><word key="lat"/><word key="owner/contractors"/><word key="1111"/><word key="templa"/><word key="archi"/><word key="pai"/><word key="archi"/><word key="req.err"/><word key="error"/><word key="getreset"/><word key="getregist"/><word key="valida"/><word key="valid"/><word key="reset"/><word key="console.log"/><word key="latitu"/><word key="latlo"/><word key="latitu"/><word key="stone w"/><word key="panel"/><word key="siding"/><word key="link"/><word key="mark"/><word key="hidden"/><word key="finish"/><word key="link"/><word key="linke"/><word key="link"/><word key="start"/><word key="posturl"/><word key="faceboo"/><word key="chats."/><word key="3"/><word key="unfollow"/><word key="id="/><word key="unfoll"/><word key="delfollow"/><word key="follow"/><word key="post-ch"/><word key="hf.chat"/><word key="post-chat"/><word key="chat"/><word key="post"/><word key="coordinat"/><word key="coordinat\"/><word key="your wish des"/><word key="budget"/><word key="state"/><word key="-save"/><word key="post"/><word key="new-title-save"/><word key="save"/><word key="textarea"/><word key="authenti"/><word key="contractors"/><word key="contractinte"/><word key="zip"/><word key="uploa"/><word key="pictu"/><word key="uploa"/><word key="s3"/><word key="form"/><word key="how it"/><word key="zip"/><word key="parseCookie"/><word key="displayn"/><word key="#tab"/><word key="my acc"/><word key="/wishl"/><word key="/wishli"/><word key="secure"/><word key="3000"/><word key="3001"/><word key="/homeo"/><word key="redirec"/><word key="or register"/><word key="posted use"/><word key="secureapp"/><word key="sign up"/><word key="url"/><word key="photo"/><word key="fromids"/><word key="popula"/><word key="adds"/><word key="createhom"/><word key="module.ex"/><word key="userlib"/><word key="getauth"/><word key="userlib"/><word key="fromcook"/><word key="module.expor"/><word key="contractorlib"/><word key="console."/><word key="bob"/><word key="bob "/><word key="profile"/><word key="consol"/><word key="    test('getFromWishIds should retrieve an array of owners from an array of wish ids', function(done) {        userdb.getFromWishIds([wishes[0]._id], function(err, users) {            users[users.length - 1]._id.toString().should.eql(homeowner1._id.toString());            done();        });    }); "/><word key="console.l"/><word key="objec"/><word key="my-projec"/><word key="i follow"/><word key="remove"/><word key="followi"/><word key="getwallfrom"/><word key="popu"/><word key="wish."/><word key="chat"/><word key="reset"/><word key="services"/><word key="allServic"/><word key="passw"/></search><language jshint="true" instanceHighlight="true" undeclaredVars="true" unusedFunctionArgs="true"/></settings>